{"file_contents":{"README.md":{"content":"# Personal Library\n\nThis is the boilerplate for the Personal Library project. Instructions for building your project can be found at https://www.freecodecamp.org/learn/quality-assurance/quality-assurance-projects/personal-library\n","size_bytes":230},"assertion-analyser.js":{"content":"/*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*       DO NOT EDIT THIS FILE\n*       For FCC testing purposes!\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*/\n\nfunction objParser(str, init) {\n  // finds objects, arrays, strings, and function arguments\n  // between parens, because they may contain ','\n  let openSym = ['[', '{', '\"', \"'\", '('];\n  let closeSym = [']', '}', '\"', \"'\", ')'];\n  let type;\n  let i;\n  for(i = (init || 0); i < str.length; i++ ) {\n    type = openSym.indexOf(str[i]);\n    if( type !== -1)  break;\n  }\n  if (type === -1) return null;\n  let open = openSym[type];\n  let close = closeSym[type];\n  let count = 1;\n  let k;\n  for(k = i+1; k < str.length; k++) {\n    if(open === '\"' || open === \"'\") {\n      if(str[k] === close) count--;\n      if(str[k] === '\\\\') k++;\n    } else {\n      if(str[k] === open) count++;\n      if(str[k] === close) count--;\n    }\n    if(count === 0) break;\n  }\n  if(count !== 0) return null;\n  let obj = str.slice(i, k+1);\n  return {\n    start : i,\n    end: k,\n    obj: obj\n  };\n}\n\nfunction replacer(str) {\n  // replace objects with a symbol ( __#n)\n  let obj;\n  let cnt = 0;\n  let data = [];\n  while(obj = objParser(str)) {\n    data[cnt] = obj.obj;\n    str = str.substring(0, obj.start) + '__#' + cnt++ + str.substring(obj.end+1)\n  }\n  return {\n    str : str,\n    dictionary : data\n  }\n}\n\nfunction splitter(str) {\n  // split on commas, then restore the objects\n  let strObj = replacer(str);\n  let args = strObj.str.split(',');\n  args = args.map(function(a){\n    let m = a.match(/__#(\\d+)/);\n    while (m) {\n      a = a.replace(/__#(\\d+)/, strObj.dictionary[m[1]]);\n      m = a.match(/__#(\\d+)/);\n    }\n    return a.trim();\n  })\n  return args;\n}\n\nfunction assertionAnalyser(body) {\n  \n  // already filtered in the test runner\n  // // remove comments\n  // body = body.replace(/\\/\\/.*\\n|\\/\\*.*\\*\\//g, '');\n  // // get test function body\n  // body = body.match(/\\{\\s*([\\s\\S]*)\\}\\s*$/)[1];\n  \n  if(!body) return \"invalid assertion\";\n  // replace assertions bodies, so that they cannot\n  // contain the word 'assertion'\n\n  let cleanedBody = body.match(/(?:browser\\s*\\.\\s*)?assert\\s*\\.\\s*\\w*\\([\\s\\S]*\\)/)\n  if(cleanedBody && Array.isArray(cleanedBody)) {\n    body = cleanedBody[0];\n  } else {\n    // No assertions present\n    return [];\n  }\n  let s = replacer(body);\n  // split on 'assertion'\n  let splittedAssertions = s.str.split('assert');\n  let assertions = splittedAssertions.slice(1);\n  // match the METHODS\n\n  let assertionBodies = [];\n  let methods = assertions.map(function(a, i){\n    let m = a.match(/^\\s*\\.\\s*(\\w+)__#(\\d+)/);\n    assertionBodies.push(parseInt(m[2]));\n    let pre = splittedAssertions[i].match(/browser\\s*\\.\\s*/) ? 'browser.' : '';\n    return pre + m[1];\n  });\n  if(methods.some(function(m){ return !m })) return \"invalid assertion\";\n  // remove parens from the assertions bodies\n  let bodies = assertionBodies.map(function(b){\n    return s.dictionary[b].slice(1,-1).trim();\n  });\n  assertions = methods.map(function(m, i) {\n    return {\n      method: m,\n      args: splitter(bodies[i]) //replace objects, split on ',' ,then restore objects\n    }\n  })\n  return assertions;\n}\n\nmodule.exports = assertionAnalyser;\n","size_bytes":3134},"replit.md":{"content":"# Personal Library Project\n\n## Overview\nThis is a Personal Library project from FreeCodeCamp's Quality Assurance curriculum. It's a full-stack Node.js application that allows users to manage a collection of books with comments.\n\n## Project Architecture\n- **Backend**: Express.js server serving both API endpoints and static files\n- **Frontend**: HTML/JavaScript client with jQuery for DOM manipulation\n- **Database**: None implemented (API endpoints are stubs for now)\n- **Testing**: Mocha/Chai setup included for functional testing\n\n## Current Setup for Replit\n- Server configured to run on `0.0.0.0:5000` for Replit compatibility\n- Workflow configured to run `npm start` \n- Dependencies installed successfully\n- CORS enabled for development\n\n## Recent Changes (September 23, 2025)\n- Updated server.js to bind to 0.0.0.0:5000 instead of default 3000\n- Installed project dependencies via npm\n- Configured Replit workflow for the server\n- Ready for development and testing\n\n## API Endpoints (To Be Implemented)\n- GET /api/books - Get all books\n- POST /api/books - Add a new book  \n- DELETE /api/books - Delete all books\n- GET /api/books/:id - Get specific book with comments\n- POST /api/books/:id - Add comment to book\n- DELETE /api/books/:id - Delete specific book\n\n## Files Structure\n- `server.js` - Main server file\n- `routes/api.js` - API route definitions (stub implementation)\n- `views/index.html` - Frontend HTML\n- `public/client.js` - Frontend JavaScript\n- `public/style.css` - Styles\n- `tests/` - Test files","size_bytes":1515},"server.js":{"content":"'use strict';\n\nconst express     = require('express');\nconst bodyParser  = require('body-parser');\nconst cors        = require('cors');\nrequire('dotenv').config();\n\nconst apiRoutes         = require('./routes/api.js');\nconst fccTestingRoutes  = require('./routes/fcctesting.js');\nconst runner            = require('./test-runner');\n\nconst app = express();\n\napp.use('/public', express.static(process.cwd() + '/public'));\n\napp.use(cors({origin: '*'})); //USED FOR FCC TESTING PURPOSES ONLY!\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\n\n//Index page (static HTML)\napp.route('/')\n  .get(function (req, res) {\n    res.sendFile(process.cwd() + '/views/index.html');\n  });\n\n//For FCC testing purposes\nfccTestingRoutes(app);\n\n//Routing for API \napiRoutes(app);  \n    \n//404 Not Found Middleware\napp.use(function(req, res, next) {\n  res.status(404)\n    .type('text')\n    .send('Not Found');\n});\n\n//Start our server and tests!\nconst listener = app.listen(process.env.PORT || 5000, '0.0.0.0', function () {\n  console.log('Your app is listening on port ' + listener.address().port);\n  if(process.env.NODE_ENV==='test') {\n    console.log('Running Tests...');\n    setTimeout(function () {\n      try {\n        runner.run();\n      } catch(e) {\n          console.log('Tests are not valid:');\n          console.error(e);\n      }\n    }, 1500);\n  }\n});\n\nmodule.exports = app; //for unit/functional testing\n","size_bytes":1423},"test-runner.js":{"content":"/*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*       DO NOT EDIT THIS FILE\n*       For FCC testing purposes!\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*/\n\nconst analyser = require('./assertion-analyser');\nconst EventEmitter = require('events').EventEmitter;\n\nconst Mocha = require('mocha'),\n    fs = require('fs'),\n    path = require('path');\n\nconst mocha = new Mocha();\nconst testDir = './tests'\n\n\n// Add each .js file to the mocha instance\nfs.readdirSync(testDir).filter(function(file){\n    // Only keep the .js files\n    return file.substr(-3) === '.js';\n\n}).forEach(function(file){\n    mocha.addFile(\n        path.join(testDir, file)\n    );\n});\n\nlet emitter = new EventEmitter();  \nemitter.run = function() {\n\n  let tests = [];\n  let context = \"\";\n  let separator = ' -> ';\n  // Run the tests.\n  try {\n  let runner = mocha.ui('tdd').run()\n    .on('test end', function(test) {\n        // remove comments\n        let body = test.body.replace(/\\/\\/.*\\n|\\/\\*.*\\*\\//g, '');\n        // collapse spaces\n        body = body.replace(/\\s+/g,' ');\n        let obj = {\n          title: test.title,\n          context: context.slice(0, -separator.length),\n          state: test.state,\n          // body: body,\n          assertions: analyser(body)\n        };\n        tests.push(obj);\n    })\n    .on('end', function() {\n        emitter.report = tests;\n        emitter.emit('done', tests)\n    })\n    .on('suite', function(s) {\n      context += (s.title + separator);\n\n    })\n    .on('suite end', function(s) {\n      context = context.slice(0, -(s.title.length + separator.length))\n    })\n  } catch(e) {\n    throw(e);\n  }\n};\n\nmodule.exports = emitter;\n\n/*\n * Mocha.runner Events:\n * can be used to build a better custom report\n *\n *   - `start`  execution started\n *   - `end`  execution complete\n *   - `suite`  (suite) test suite execution started\n *   - `suite end`  (suite) all tests (and sub-suites) have finished\n *   - `test`  (test) test execution started\n *   - `test end`  (test) test completed\n *   - `hook`  (hook) hook execution started\n *   - `hook end`  (hook) hook complete\n *   - `pass`  (test) test passed\n *   - `fail`  (test, err) test failed\n *   - `pending`  (test) test pending\n */","size_bytes":2150},"public/client.js":{"content":"$( document ).ready(function() {\n  let  items = [];\n  let  itemsRaw = [];\n  \n  $.getJSON('/api/books', function(data) {\n    //let  items = [];\n    itemsRaw = data;\n    $.each(data, function(i, val) {\n      items.push('<li class=\"bookItem\" id=\"' + i + '\">' + val.title + ' - ' + val.commentcount + ' comments</li>');\n      return ( i !== 14 );\n    });\n    if (items.length >= 15) {\n      items.push('<p>...and '+ (data.length - 15)+' more!</p>');\n    }\n    $('<ul/>', {\n      'class': 'listWrapper',\n      html: items.join('')\n      }).appendTo('#display');\n  });\n  \n  let  comments = [];\n  $('#display').on('click','li.bookItem',function() {\n    $(\"#detailTitle\").html('<b>'+itemsRaw[this.id].title+'</b> (id: '+itemsRaw[this.id]._id+')');\n    $.getJSON('/api/books/'+itemsRaw[this.id]._id, function(data) {\n      comments = [];\n      $.each(data.comments, function(i, val) {\n        comments.push('<li>' +val+ '</li>');\n      });\n      comments.push('<br><form id=\"newCommentForm\"><input style=\"width:300px\" type=\"text\" class=\"form-control\" id=\"commentToAdd\" name=\"comment\" placeholder=\"New Comment\"></form>');\n      comments.push('<br><button class=\"btn btn-info addComment\" id=\"'+ data._id+'\">Add Comment</button>');\n      comments.push('<button class=\"btn btn-danger deleteBook\" id=\"'+ data._id+'\">Delete Book</button>');\n      $('#detailComments').html(comments.join(''));\n    });\n  });\n  \n  $('#bookDetail').on('click','button.deleteBook',function() {\n    $.ajax({\n      url: '/api/books/'+this.id,\n      type: 'delete',\n      success: function(data) {\n        //update list\n        $('#detailComments').html('<p style=\"color: red;\">'+data+'<p><p>Refresh the page</p>');\n      }\n    });\n  });  \n  \n  $('#bookDetail').on('click','button.addComment',function() {\n    let  newComment = $('#commentToAdd').val();\n    $.ajax({\n      url: '/api/books/'+this.id,\n      type: 'post',\n      dataType: 'json',\n      data: $('#newCommentForm').serialize(),\n      success: function(data) {\n        comments.unshift(newComment); //adds new comment to top of list\n        $('#detailComments').html(comments.join(''));\n      }\n    });\n  });\n  \n  $('#newBook').click(function() {\n    $.ajax({\n      url: '/api/books',\n      type: 'post',\n      dataType: 'json',\n      data: $('#newBookForm').serialize(),\n      success: function(data) {\n        //update list\n      }\n    });\n  });\n  \n  $('#deleteAllBooks').click(function() {\n    $.ajax({\n      url: '/api/books',\n      type: 'delete',\n      dataType: 'json',\n      data: $('#newBookForm').serialize(),\n      success: function(data) {\n        //update list\n      }\n    });\n  }); \n  \n});","size_bytes":2626},"public/style.css":{"content":".border {\n  border-style: solid;\n  border-width: 1px;\n  margin: 10px;\n}\n\n#sampleui {\n  max-width: 450px;\n  margin-left: 5%;\n  height: 100%;\n}\n\n#sampleposting {\n  max-width: 450px;\n  text-align: center;\n  margin-left: 5%;\n}\n\n#userstories {\n  margin-left: 5%;\n}\n\nform {\n  padding: 5px;\n}\n\nlabel {\n  display: block;\n  font-weight: bold;\n}\n\ninput {\n  margin-bottom: 5px;\n}","size_bytes":368},"routes/api.js":{"content":"/*\n*\n*\n*       Complete the API routing below\n*       \n*       \n*/\n\n'use strict';\n\nconst { MongoClient, ObjectId } = require('mongodb');\n\nlet db;\n\n// Initialize MongoDB connection\nMongoClient.connect(process.env.DB)\n  .then(client => {\n    console.log('Connected to MongoDB');\n    db = client.db('personal_library');\n  })\n  .catch(error => console.error('MongoDB connection error:', error));\n\nmodule.exports = function (app) {\n\n  app.route('/api/books')\n    .get(function (req, res){\n      //response will be array of book objects\n      //json res format: [{\"_id\": bookid, \"title\": book_title, \"commentcount\": num_of_comments },...]\n      if (!db) {\n        return res.status(500).send('database unavailable');\n      }\n      \n      db.collection('books').find({}).toArray()\n        .then(books => {\n          const response = books.map(book => ({\n            _id: book._id,\n            title: book.title,\n            commentcount: book.comments ? book.comments.length : 0\n          }));\n          res.json(response);\n        })\n        .catch(err => {\n          console.error('Error fetching books:', err);\n          res.status(500).send('could not perform operation');\n        });\n    })\n    \n    .post(function (req, res){\n      let title = req.body.title;\n      //response will contain new book object including atleast _id and title\n      \n      if (!title) {\n        return res.send('missing required field title');\n      }\n      \n      if (!db) {\n        return res.status(500).send('database unavailable');\n      }\n      \n      const newBook = {\n        title: title,\n        comments: []\n      };\n      \n      db.collection('books').insertOne(newBook)\n        .then(result => {\n          res.json({\n            _id: result.insertedId,\n            title: title\n          });\n        })\n        .catch(err => {\n          console.error('Error creating book:', err);\n          res.status(500).send('could not perform operation');\n        });\n    })\n    \n    .delete(function(req, res){\n      //if successful response will be 'complete delete successful'\n      if (!db) {\n        return res.status(500).send('database unavailable');\n      }\n      \n      db.collection('books').deleteMany({})\n        .then(result => {\n          res.send('complete delete successful');\n        })\n        .catch(err => {\n          console.error('Error deleting all books:', err);\n          res.status(500).send('could not perform operation');\n        });\n    });\n\n\n\n  app.route('/api/books/:id')\n    .get(function (req, res){\n      let bookid = req.params.id;\n      //json res format: {\"_id\": bookid, \"title\": book_title, \"comments\": [comment,comment,...]}\n      \n      if (!ObjectId.isValid(bookid)) {\n        return res.send('no book exists');\n      }\n      \n      if (!db) {\n        return res.status(500).send('database unavailable');\n      }\n      \n      db.collection('books').findOne({ _id: new ObjectId(bookid) })\n        .then(book => {\n          if (!book) {\n            return res.send('no book exists');\n          }\n          \n          res.json({\n            _id: book._id,\n            title: book.title,\n            comments: book.comments || []\n          });\n        })\n        .catch(err => {\n          console.error('Error fetching book:', err);\n          res.status(500).send('could not perform operation');\n        });\n    })\n    \n    .post(function(req, res){\n      let bookid = req.params.id;\n      let comment = req.body.comment;\n      //json res format same as .get\n      \n      if (!comment) {\n        return res.send('missing required field comment');\n      }\n      \n      if (!ObjectId.isValid(bookid)) {\n        return res.send('no book exists');\n      }\n      \n      if (!db) {\n        return res.status(500).send('database unavailable');\n      }\n      \n      db.collection('books').findOneAndUpdate(\n        { _id: new ObjectId(bookid) },\n        { $push: { comments: comment } },\n        { returnDocument: 'after' }\n      )\n        .then(result => {\n          if (!result.value) {\n            return res.send('no book exists');\n          }\n          \n          res.json({\n            _id: result.value._id,\n            title: result.value.title,\n            comments: result.value.comments || []\n          });\n        })\n        .catch(err => {\n          console.error('Error adding comment:', err);\n          res.status(500).send('could not perform operation');\n        });\n    })\n    \n    .delete(function(req, res){\n      let bookid = req.params.id;\n      //if successful response will be 'delete successful'\n      \n      if (!ObjectId.isValid(bookid)) {\n        return res.send('no book exists');\n      }\n      \n      if (!db) {\n        return res.status(500).send('database unavailable');\n      }\n      \n      db.collection('books').deleteOne({ _id: new ObjectId(bookid) })\n        .then(result => {\n          if (result.deletedCount === 0) {\n            return res.send('no book exists');\n          }\n          \n          res.send('delete successful');\n        })\n        .catch(err => {\n          console.error('Error deleting book:', err);\n          res.status(500).send('could not perform operation');\n        });\n    });\n  \n};\n","size_bytes":5152},"routes/fcctesting.js":{"content":"/*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*       DO NOT EDIT THIS FILE\n*       For FCC testing purposes!\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*\n*/\n\n'use strict';\n\nconst cors = require('cors');\nconst fs = require('fs');\nconst runner = require('../test-runner');\n\nmodule.exports = function (app) {\n\n  app.route('/_api/server.js')\n    .get(function(req, res, next) {\n      console.log('requested');\n      fs.readFile(__dirname + '/server.js', function(err, data) {\n        if(err) return next(err);\n        res.send(data.toString());\n      });\n    });\n  app.route('/_api/routes/api.js')\n    .get(function(req, res, next) {\n      console.log('requested');\n      fs.readFile(__dirname + '/routes/api.js', function(err, data) {\n        if(err) return next(err);\n        res.type('txt').send(data.toString());\n      });\n    });\n\n  app.get('/_api/get-tests', cors(), function(req, res, next){\n    console.log('requested');\n    if(process.env.NODE_ENV === 'test') return next();\n    res.json({status: 'unavailable'});\n  },\n  function(req, res, next){\n    if(!runner.report) return next();\n    res.json(testFilter(runner.report, req.query.type, req.query.n));\n  },\n  function(req, res){\n    runner.on('done', function(report){\n      process.nextTick(() =>  res.json(testFilter(runner.report, req.query.type, req.query.n)));\n    });\n  });\n  app.get('/_api/app-info', function(req, res) {\n    let hs = Object.keys(res._headers)\n      .filter(h => !h.match(/^access-control-\\w+/));\n    let hObj = {};\n    hs.forEach(h => {hObj[h] = res._headers[h]});\n    delete res._headers['strict-transport-security'];\n    res.json({headers: hObj});\n  });\n  \n};\n\nfunction testFilter(tests, type, n) {\n  let out;\n  switch (type) {\n    case 'unit' :\n      out = tests.filter(t => t.context.match('Unit Tests'));\n      break;\n    case 'functional':\n      out = tests.filter(t => t.context.match('Functional Tests') && !t.title.match('#example'));\n      break;\n    default:\n      out = tests;\n  }\n  if(n !== undefined) {\n    return out[n] || out;\n  }\n  return out;\n}","size_bytes":2002},"tests/2_functional-tests.js":{"content":"/*\n*\n*\n*       FILL IN EACH FUNCTIONAL TEST BELOW COMPLETELY\n*       -----[Keep the tests in the same order!]-----\n*       \n*/\n\nconst chaiHttp = require('chai-http');\nconst chai = require('chai');\nconst assert = chai.assert;\nconst server = require('../server');\n\nchai.use(chaiHttp);\n\nsuite('Functional Tests', function() {\n\n  /*\n  * ----[EXAMPLE TEST]----\n  * Each test should completely test the response of the API end-point including response status code!\n  */\n  test('#example Test GET /api/books', function(done){\n     chai.request(server)\n      .get('/api/books')\n      .end(function(err, res){\n        assert.equal(res.status, 200);\n        assert.isArray(res.body, 'response should be an array');\n        if (res.body.length > 0) {\n          assert.property(res.body[0], 'commentcount', 'Books in array should contain commentcount');\n          assert.property(res.body[0], 'title', 'Books in array should contain title');\n          assert.property(res.body[0], '_id', 'Books in array should contain _id');\n        }\n        done();\n      });\n  });\n  /*\n  * ----[END of EXAMPLE TEST]----\n  */\n\n  suite('Routing tests', function() {\n\n\n    suite('POST /api/books with title => create book object/expect book object', function() {\n      \n      test('Test POST /api/books with title', function(done) {\n        chai.request(server)\n          .post('/api/books')\n          .send({\n            title: 'Test Book'\n          })\n          .end(function(err, res){\n            assert.equal(res.status, 200);\n            assert.isObject(res.body, 'response should be an object');\n            assert.property(res.body, 'title', 'Book should contain title');\n            assert.property(res.body, '_id', 'Book should contain _id');\n            assert.equal(res.body.title, 'Test Book');\n            done();\n          });\n      });\n      \n      test('Test POST /api/books with no title given', function(done) {\n        chai.request(server)\n          .post('/api/books')\n          .send({})\n          .end(function(err, res){\n            assert.equal(res.status, 200);\n            assert.equal(res.text, 'missing required field title');\n            done();\n          });\n      });\n      \n    });\n\n\n    suite('GET /api/books => array of books', function(){\n      \n      test('Test GET /api/books',  function(done){\n        chai.request(server)\n          .get('/api/books')\n          .end(function(err, res){\n            assert.equal(res.status, 200);\n            assert.isArray(res.body, 'response should be an array');\n            if (res.body.length > 0) {\n              assert.property(res.body[0], 'commentcount', 'Books in array should contain commentcount');\n              assert.property(res.body[0], 'title', 'Books in array should contain title');\n              assert.property(res.body[0], '_id', 'Books in array should contain _id');\n            }\n            done();\n          });\n      });      \n      \n    });\n\n\n    suite('GET /api/books/[id] => book object with [id]', function(){\n      \n      test('Test GET /api/books/[id] with id not in db',  function(done){\n        chai.request(server)\n          .get('/api/books/5f665eb46e296f6b9b6a504d')\n          .end(function(err, res){\n            assert.equal(res.status, 200);\n            assert.equal(res.text, 'no book exists');\n            done();\n          });\n      });\n      \n      test('Test GET /api/books/[id] with valid id in db',  function(done){\n        // First create a book to test with\n        chai.request(server)\n          .post('/api/books')\n          .send({\n            title: 'Test Book for GET'\n          })\n          .end(function(err, res){\n            const bookId = res.body._id;\n            chai.request(server)\n              .get('/api/books/' + bookId)\n              .end(function(err, res){\n                assert.equal(res.status, 200);\n                assert.isObject(res.body, 'response should be an object');\n                assert.property(res.body, 'title', 'Book should contain title');\n                assert.property(res.body, '_id', 'Book should contain _id');\n                assert.property(res.body, 'comments', 'Book should contain comments');\n                assert.isArray(res.body.comments, 'Comments should be an array');\n                done();\n              });\n          });\n      });\n      \n    });\n\n\n    suite('POST /api/books/[id] => add comment/expect book object with id', function(){\n      \n      test('Test POST /api/books/[id] with comment', function(done){\n        // First create a book to test with\n        chai.request(server)\n          .post('/api/books')\n          .send({\n            title: 'Test Book for Comment'\n          })\n          .end(function(err, res){\n            const bookId = res.body._id;\n            chai.request(server)\n              .post('/api/books/' + bookId)\n              .send({\n                comment: 'This is a test comment'\n              })\n              .end(function(err, res){\n                assert.equal(res.status, 200);\n                assert.isObject(res.body, 'response should be an object');\n                assert.property(res.body, 'title', 'Book should contain title');\n                assert.property(res.body, '_id', 'Book should contain _id');\n                assert.property(res.body, 'comments', 'Book should contain comments');\n                assert.isArray(res.body.comments, 'Comments should be an array');\n                assert.include(res.body.comments, 'This is a test comment');\n                done();\n              });\n          });\n      });\n\n      test('Test POST /api/books/[id] without comment field', function(done){\n        chai.request(server)\n          .post('/api/books/5f665eb46e296f6b9b6a504d')\n          .send({})\n          .end(function(err, res){\n            assert.equal(res.status, 200);\n            assert.equal(res.text, 'missing required field comment');\n            done();\n          });\n      });\n\n      test('Test POST /api/books/[id] with comment, id not in db', function(done){\n        chai.request(server)\n          .post('/api/books/5f665eb46e296f6b9b6a504d')\n          .send({\n            comment: 'This is a test comment'\n          })\n          .end(function(err, res){\n            assert.equal(res.status, 200);\n            assert.equal(res.text, 'no book exists');\n            done();\n          });\n      });\n      \n    });\n\n    suite('DELETE /api/books/[id] => delete book object id', function() {\n\n      test('Test DELETE /api/books/[id] with valid id in db', function(done){\n        // First create a book to delete\n        chai.request(server)\n          .post('/api/books')\n          .send({\n            title: 'Test Book for Delete'\n          })\n          .end(function(err, res){\n            const bookId = res.body._id;\n            chai.request(server)\n              .delete('/api/books/' + bookId)\n              .end(function(err, res){\n                assert.equal(res.status, 200);\n                assert.equal(res.text, 'delete successful');\n                done();\n              });\n          });\n      });\n\n      test('Test DELETE /api/books/[id] with  id not in db', function(done){\n        chai.request(server)\n          .delete('/api/books/5f665eb46e296f6b9b6a504d')\n          .end(function(err, res){\n            assert.equal(res.status, 200);\n            assert.equal(res.text, 'no book exists');\n            done();\n          });\n      });\n\n    });\n\n  });\n\n});\n","size_bytes":7386}},"version":1}